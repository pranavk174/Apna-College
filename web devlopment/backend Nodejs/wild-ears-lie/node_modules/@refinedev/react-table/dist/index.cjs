"use client"
var y=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var G=Object.getOwnPropertyNames;var J=Object.prototype.hasOwnProperty;var i=(o,t)=>y(o,"name",{value:t,configurable:!0});var N=(o,t)=>{for(var e in t)y(o,e,{get:t[e],enumerable:!0})},V=(o,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of G(t))!J.call(o,a)&&a!==e&&y(o,a,{get:()=>t[a],enumerable:!(r=q(t,a))||r.enumerable});return o};var W=o=>V(y({},"__esModule",{value:!0}),o);var X={};N(X,{useTable:()=>K});module.exports=W(X);var T=require("react"),H=require("@refinedev/core"),d=require("@tanstack/react-table");var f=require("react");var O=i(()=>{let o=(0,f.useRef)(!0);return(0,f.useEffect)(()=>{o.current=!1},[]),o.current},"useIsFirstRender");var B=i(({columns:o,columnFilters:t})=>(t==null?void 0:t.map(e=>{var s,u,c,p;let r=e.operator??((u=(s=o.find(m=>m.id===e.id))==null?void 0:s.meta)==null?void 0:u.filterOperator);if((r==="and"||r==="or")&&Array.isArray(e.value))return{key:((p=(c=o.find(C=>C.id===e.id))==null?void 0:c.meta)==null?void 0:p.filterKey)??e.id,operator:r,value:e.value};let l=Array.isArray(e.value)?"in":"eq";return{field:e.id,operator:r??l,value:e.value}}))??[],"columnFiltersToCrudFilters");var L=i(({nextFilters:o,coreFilters:t})=>t.filter(r=>!o.some(a=>{let l=r.operator==="and"||r.operator==="or",s=a.operator==="and"||a.operator==="or",u=r.operator===a.operator,c=l&&s&&r.key===a.key,p=!l&&!s&&r.field===a.field;return u&&(c||p)})).map(r=>r.operator==="and"||r.operator==="or"?{key:r.key,operator:r.operator,value:[]}:{field:r.field,operator:r.operator,value:void 0}),"getRemovedFilters");var Q=i(({columns:o,crudFilters:t})=>t.map(e=>{var r;return e.operator==="and"||e.operator==="or"?e.key?{id:((r=o.find(l=>{var s;return((s=l.meta)==null?void 0:s.filterKey)===e.key}))==null?void 0:r.id)??e.key,operator:e.operator,value:e.value}:void 0:{id:e.field,operator:e.operator,value:e.value}}).filter(Boolean),"crudFiltersToColumnFilters");function K({refineCoreProps:{hasPagination:o=!0,...t}={},initialState:e={},...r}){var x,P,k;let a=O(),l=(0,H.useTable)({...t,hasPagination:o}),s=(((x=t.filters)==null?void 0:x.mode)||"server")==="server",u=(((P=t.sorters)==null?void 0:P.mode)||"server")==="server",c=o===!1?"off":"server",p=(((k=t.pagination)==null?void 0:k.mode)??c)!=="off",{tableQuery:{data:m},current:C,setCurrent:g,pageSize:h,setPageSize:w,sorters:z,setSorters:I,filters:v,setFilters:M,pageCount:U}=l,D=(0,d.useReactTable)({data:(m==null?void 0:m.data)??[],getCoreRowModel:(0,d.getCoreRowModel)(),getSortedRowModel:u?void 0:(0,d.getSortedRowModel)(),getFilteredRowModel:s?void 0:(0,d.getFilteredRowModel)(),initialState:{pagination:{pageIndex:C-1,pageSize:h},sorting:z.map(n=>({id:n.field,desc:n.order==="desc"})),columnFilters:Q({columns:r.columns,crudFilters:v}),...e},pageCount:U,manualPagination:!0,manualSorting:u,manualFiltering:s,...r}),{state:A,columns:S}=D.options,{pagination:j,sorting:F,columnFilters:E}=A,{pageIndex:b,pageSize:R}=j??{};return(0,T.useEffect)(()=>{b!==void 0&&g(b+1)},[b]),(0,T.useEffect)(()=>{R!==void 0&&w(R)},[R]),(0,T.useEffect)(()=>{F!==void 0&&(I(F==null?void 0:F.map(n=>({field:n.id,order:n.desc?"desc":"asc"}))),F.length>0&&p&&!a&&g(1))},[F]),(0,T.useEffect)(()=>{let n=B({columns:S,columnFilters:E});n.push(...L({nextFilters:n,coreFilters:v})),M(n),n.length>0&&p&&!a&&g(1)},[E,S]),{...D,refineCore:l}}i(K,"useTable");
//# sourceMappingURL=index.cjs.map